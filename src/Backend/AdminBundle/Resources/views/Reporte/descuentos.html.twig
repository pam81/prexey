{% extends '::backend.html.twig' %}
{% block stylesheets %}
  {{ parent() }}
   <link rel="stylesheet" href="{{ asset('css/bootstrap-datetimepicker.min.css') }}"  >
   
{% endblock %}
{% block container %}
    
       
        <h4>Listado de Descuentos de Sueldos </h4>
         
<div class="row-fluid">
  
  
  <div class="span2">   <button class="btn btn-primary" id="exportar_button" data-url="{{ path('exportar_dtosueldo') }}" type="button"  ><i class="icon-file icon-white"></i>Exportar</button> </div>
  
    <div class="span9">
     
    <form id="custom-search-form" method="get" class="form-search form-horizontal pull-left" action="{{ path('reporte_dtosueldo') }}">
       <div id="error"></div>
      <div class="controls form-inline">
           <div class="input-append"  id="fecha_desde">
          <input type="text"  id="search-date_desde" data-format="dd-MM-yyyy" name="date_desde" class=" input-small" placeholder="Desde" value="{% if search.date_desde != '' %}{{ search.date_desde|date('d-m-Y') }} {% endif %}">
          <span class="add-on">
             <i class="icon-calendar"></i>
          </span>
          </div>
          <div class="input-append" id="fecha_hasta" >
          <input type="text" id="search-date_hasta" data-format="dd-MM-yyyy" name="date_hasta" class=" input-small" placeholder="Hasta" value="{% if search.date_hasta != '' %}{{ search.date_hasta|date('d-m-Y') }} {% endif %}">
          <span class="add-on">
             <i class="icon-calendar"></i>
          </span>
          </div>
          <input type="text" id="search-chofer" name="chofer" class="input-small" placeholder="Chofer" value="{{ search.chofer }}">
          <input type="text" id="search-viaje" name="viaje" class="input-small" placeholder="Viaje" value="{{ search.viaje }}">
          <input type="text" id="search-monto" name="monto" class="input-small" placeholder="Monto" value="{{ search.monto }}">
       </div>
       <br>
       <div class="controls form-inline">   
          <input type="text" id="search-recibo" name="recibo" class="input-small" placeholder="Recibo" value="{{ search.recibo }}">
          <select class="input-medium" name="tipo" id="search-tipo">
          <option></option>
          {% for t in tipos %}
           <option value="{{ t.id }}" {% if t.id == search.tipo %} selected="selected" {% endif %}  >{{ t.texto }}</option>
          {% endfor %}
          </select>
          <label class="checkbox">
          <input type="checkbox" id="clear-filter" name="clear-filter" value="1">Quitar Filtros
          </label>
          <button type="submit" id="search-reporte-button" class="btn" ><i class="icon-search"></i></button>
      </div>
      
      </form>
    
    
    
    </div>
    
  
    
 </div>
    
    
    <div class="well">
    <table class="table">
    <thead>
    <tr>
    
    <th {% if pagination.isSorted('u.fecha') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'Fecha', 'u.fecha') }}</th>
    <th {% if pagination.isSorted('u.tipo') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'Tipo', 't.texto') }}</th>
    <th >Motivo</th>
    <th {% if pagination.isSorted('t.recibo') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'Recibo', 'u.recibo') }}</th>
    <th {% if pagination.isSorted('u.monto') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'Monto', 'u.monto') }}</th>
    <th {% if pagination.isSorted('c.lastname') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'Chofer', 'c.lastname') }}</th>
    <th {% if pagination.isSorted('v.id') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'Viaje', 'v.id') }}</th>
    </tr>
    </thead>
    <tbody>
     {% for dto in pagination %}
   
    
     <tr>
                
                <td>{{ dto.getFecha |date('d-m-Y') }}</td>
                <td>{{ dto.getTipoText  }}</td>
                <td>{{ dto.getMotivo }}</td>
                 <td>{% if dto.getCosto %}
                 {{ dto.getCosto.getRecibo }} 
                 {% endif %}
                 </td>
                <td>{{ dto.getMonto }}</td>
                <td>{{ dto.getChofer }}</td>
                <td>
                {% if dto.getViaje %}
                {{ dto.getViaje }}
                {% endif %}
                </td>
                
    </tr>
    
    {% endfor %}
   
    </tbody>
    </table>
    </div>
    
    <div class="pagination">
     {{ knp_pagination_render(pagination) }}
    
    </div>
    
   
    
    
    {% endblock %}
  {% block javascripts %}
  {{ parent() }}
   <script src="{{ asset('js/bootstrap-datetimepicker.min.js') }}"></script>
   <script src="{{ asset('js/locales/bootstrap-datetimepicker.es.js') }}"></script>
   {% javascripts '@BackendAdminBundle/Resources/public/js/descuentos.js' %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %}
   
{% javascripts '@BackendAdminBundle/Resources/public/js/exportar_reporte.js' %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %} 
{% endblock %}